<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Northfield Mandolin Market Report — Feb 22, 2026</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='15' fill='%238b5e34'/%3E%3Ctext x='16' y='22.5' text-anchor='middle' font-family='Georgia,serif' font-size='20' font-weight='bold' fill='%23f5efe6'%3EN%3C/text%3E%3C/svg%3E">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Source+Sans+3:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700;800&family=DM+Serif+Display&family=Crimson+Pro:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        /* ========== THEME SYSTEM ========== */
        :root {
            /* Default: Aged Maple */
            --bg: #f5efe6;
            --surface: #fffdf8;
            --surface-2: #f0e8d8;
            --border: #d4c4a8;
            --text: #3a2e1e;
            --text-muted: #7a6b55;
            --accent: #8b5e34;
            --accent-2: #a67c52;
            --green: #5a7a4a;
            --amber: #b8860b;
            --red: #9b3a34;
            --orange: #c87533;
            --cyan: #4a7a7a;
            --pink: #9b5a6a;

            --font-heading: 'Libre Baskerville', 'Georgia', serif;
            --font-body: 'Source Sans 3', 'Helvetica Neue', sans-serif;

            --chart-1: #7b4a2a;
            --chart-2: #c49a3e;
            --chart-3: #5a7a4a;
            --chart-4: #b8860b;
            --chart-5: #c87533;
            --chart-6: #4a7a7a;
            --chart-7: #9b5a6a;
            --chart-8: #6b5b4a;
            --chart-dcm: #b8860b;

            --radius: 6px;
            --shadow: 0 1px 3px rgba(58, 46, 30, 0.08);
            --shadow-hover: 0 4px 12px rgba(58, 46, 30, 0.12);
        }

        /* Theme: Sunburst */
        [data-theme="sunburst"] {
            --bg: #faf6ef;
            --surface: #fffef9;
            --surface-2: #f2ead7;
            --border: #dbc9a0;
            --text: #2c2013;
            --text-muted: #8a7450;
            --accent: #a0522d;
            --accent-2: #cd853f;
            --font-heading: 'Playfair Display', 'Georgia', serif;
            --chart-1: #8b3a1a;
            --chart-2: #d4a530;
            --chart-3: #6b8e23;
            --chart-4: #cd853f;
            --chart-5: #d2691e;
            --chart-6: #5f9ea0;
            --chart-7: #bc6c8a;
            --chart-8: #8b7355;
            --chart-dcm: #daa520;
        }

        /* Theme: Workshop */
        [data-theme="workshop"] {
            --bg: #e8e0d4;
            --surface: #f2ece2;
            --surface-2: #ddd4c4;
            --border: #c4b89e;
            --text: #33291c;
            --text-muted: #6e6050;
            --accent: #5c4033;
            --accent-2: #795c3e;
            --font-heading: 'DM Serif Display', 'Georgia', serif;
            --chart-1: #4a2e20;
            --chart-2: #9e8530;
            --chart-3: #4e6b3a;
            --chart-4: #795c3e;
            --chart-5: #a06030;
            --chart-6: #456868;
            --chart-7: #7a4a5a;
            --chart-8: #5a5040;
            --chart-dcm: #96751a;
        }

        /* Theme: Dark Rosewood */
        [data-theme="rosewood"] {
            --bg: #1e1814;
            --surface: #2a221c;
            --surface-2: #352b24;
            --border: #4a3d32;
            --text: #e8ddd0;
            --text-muted: #a0917e;
            --accent: #c49a6c;
            --accent-2: #d4aa7a;
            --font-heading: 'Playfair Display', 'Georgia', serif;
            --chart-1: #c07040;
            --chart-2: #e0c860;
            --chart-3: #7fa06a;
            --chart-4: #d4aa7a;
            --chart-5: #d98a50;
            --chart-6: #6a9e9e;
            --chart-7: #c07a90;
            --chart-8: #8a7a6a;
            --chart-dcm: #d4a830;
        }

        /* Theme: Spruce */
        [data-theme="spruce"] {
            --bg: #f0f2ed;
            --surface: #f8faf5;
            --surface-2: #e5e9de;
            --border: #c4ccb8;
            --text: #2a3324;
            --text-muted: #5e6b55;
            --accent: #3d5a3a;
            --accent-2: #5a7a52;
            --font-heading: 'Crimson Pro', 'Georgia', serif;
            --chart-1: #2e4a28;
            --chart-2: #a08830;
            --chart-3: #8b5e34;
            --chart-4: #5a7a52;
            --chart-5: #8a6040;
            --chart-6: #4a6a6a;
            --chart-7: #7a4a5a;
            --chart-8: #5a6a4a;
            --chart-dcm: #a08830;
        }

        /* Theme: Midnight */
        [data-theme="midnight"] {
            --bg: #14181e;
            --surface: #1c2028;
            --surface-2: #262c36;
            --border: #363e4c;
            --text: #d8dce6;
            --text-muted: #7a8599;
            --accent: #8fa4c4;
            --accent-2: #a0b4d0;
            --font-heading: 'Libre Baskerville', 'Georgia', serif;
            --chart-1: #6080b0;
            --chart-2: #d0b050;
            --chart-3: #7aaa70;
            --chart-4: #a0b4d0;
            --chart-5: #c08860;
            --chart-6: #60a0a0;
            --chart-7: #b070a0;
            --chart-8: #8090a0;
            --chart-dcm: #d0b050;
        }

        /* Theme: Parchment */
        [data-theme="parchment"] {
            --bg: #f7f0e0;
            --surface: #fffbf0;
            --surface-2: #eee5d0;
            --border: #d5c8aa;
            --text: #3d3225;
            --text-muted: #7d6d55;
            --accent: #6e4b2a;
            --accent-2: #8a6540;
            --font-heading: 'Crimson Pro', 'Georgia', serif;
            --chart-1: #5e3818;
            --chart-2: #b09020;
            --chart-3: #4e6e3e;
            --chart-4: #8a6540;
            --chart-5: #b06e30;
            --chart-6: #3e6e6e;
            --chart-7: #8e4e5e;
            --chart-8: #5e5040;
            --chart-dcm: #a08520;
        }

        /* Theme: Bourbon */
        [data-theme="bourbon"] {
            --bg: #1c1510;
            --surface: #28201a;
            --surface-2: #342a20;
            --border: #4a3c2e;
            --text: #e8dcc8;
            --text-muted: #a09078;
            --accent: #d4a050;
            --accent-2: #e0b060;
            --font-heading: 'DM Serif Display', 'Georgia', serif;
            --chart-1: #b07830;
            --chart-2: #70a060;
            --chart-3: #e0b060;
            --chart-4: #c8a040;
            --chart-5: #d08850;
            --chart-6: #60a09a;
            --chart-7: #c08080;
            --chart-8: #908060;
            --chart-dcm: #e0b060;
        }

        /* Theme: Vintage Ad */
        [data-theme="vintage-ad"] {
            --bg: #f2e8d5;
            --surface: #faf4e8;
            --surface-2: #e8dcc4;
            --border: #c8b898;
            --text: #2e2418;
            --text-muted: #6e5e48;
            --accent: #8b0000;
            --accent-2: #a52a2a;
            --font-heading: 'Playfair Display', 'Georgia', serif;
            --chart-1: #8b0000;
            --chart-2: #556b2f;
            --chart-3: #a52a2a;
            --chart-4: #b8860b;
            --chart-5: #cd853f;
            --chart-6: #2f4f4f;
            --chart-7: #800040;
            --chart-8: #5a4a38;
            --chart-dcm: #b8860b;
        }

        /* Theme: Bluegrass */
        [data-theme="bluegrass"] {
            --bg: #f0ede6;
            --surface: #faf8f2;
            --surface-2: #e4dfd5;
            --border: #c5bfb0;
            --text: #252832;
            --text-muted: #5e6270;
            --accent: #354f7f;
            --accent-2: #4a6899;
            --font-heading: 'Libre Baskerville', 'Georgia', serif;
            --chart-1: #354f7f;
            --chart-2: #a08830;
            --chart-3: #5a7a4a;
            --chart-4: #4a6899;
            --chart-5: #9a6840;
            --chart-6: #3a6a6a;
            --chart-7: #7a4a6a;
            --chart-8: #5a5a5a;
            --chart-dcm: #a08830;
        }

        /* ========== BASE STYLES ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text);
            line-height: 1.65;
            transition: background 0.4s, color 0.4s;
        }

        h1,
        h2,
        h3,
        .section-title {
            font-family: var(--font-heading);
        }

        /* ========== HEADER ========== */
        .header {
            padding: 56px 40px 44px;
            border-bottom: 1px solid var(--border);
            position: relative;
            text-align: center;
        }

        .header h1 {
            font-size: 34px;
            font-weight: 700;
            letter-spacing: -0.3px;
            margin-bottom: 10px;
            color: var(--text);
            line-height: 1.2;
        }

        .header-meta {
            font-size: 14px;
            color: var(--text-muted);
            font-family: var(--font-body);
        }

        .header-meta span {
            display: inline-block;
            margin-right: 24px;
        }

        /* ========== THEME NAV (in header) ========== */
        .theme-nav {
            position: absolute;
            top: 24px;
            right: 40px;
            display: flex;
            align-items: center;
            gap: 8px;
            user-select: none;
        }

        .theme-nav-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-muted);
            font-size: 14px;
            padding: 4px 6px;
            border-radius: 4px;
            transition: color 0.2s, background 0.2s;
            display: flex;
            align-items: center;
        }

        .theme-nav-btn:hover {
            color: var(--text);
            background: var(--surface-2);
        }

        .theme-nav-btn svg {
            width: 14px;
            height: 14px;
            fill: currentColor;
        }

        .theme-nav-name {
            font-family: var(--font-body);
            font-size: 12px;
            color: var(--text-muted);
            font-style: italic;
            min-width: 90px;
            text-align: center;
            transition: color 0.4s;
        }

        /* ========== QUANTITIES TOGGLE (inline in section title) ========== */
        .qty-toggle {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            user-select: none;
            cursor: pointer;
            margin-left: 12px;
            vertical-align: middle;
        }

        .qty-toggle input {
            accent-color: var(--accent);
            cursor: pointer;
            width: 12px;
            height: 12px;
        }

        .qty-toggle-label {
            font-family: var(--font-body);
            font-size: 11px;
            font-weight: 400;
            color: var(--text-muted);
            letter-spacing: 0.3px;
            text-transform: none;
        }

        /* ========== DCM STAR SVG ========== */
        .dcm-star {
            display: inline-block;
            width: 14px;
            height: 14px;
            vertical-align: -1px;
            margin-left: 3px;
        }

        .dcm-star svg {
            width: 100%;
            height: 100%;
            fill: var(--amber);
        }

        /* ========== LAYOUT ========== */
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 36px 40px 60px;
        }

        /* ========== KPI CARDS ========== */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 14px;
            margin-bottom: 44px;
        }

        .kpi-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px 16px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: box-shadow 0.2s, background 0.4s, border 0.4s;
        }

        .kpi-card:hover {
            box-shadow: var(--shadow-hover);
        }

        .kpi-value {
            font-family: var(--font-heading);
            font-size: 30px;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 6px;
            color: var(--accent);
        }

        .kpi-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            font-weight: 600;
        }

        /* ========== SECTIONS ========== */
        .section {
            margin-bottom: 44px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border);
            color: var(--text);
            display: flex;
            align-items: baseline;
        }

        /* ========== CHARTS ========== */
        .chart-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: background 0.4s, border 0.4s;
        }

        .chart-card h3 {
            font-family: var(--font-body);
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.2px;
            margin-bottom: 16px;
        }

        .chart-card canvas {
            max-height: 260px;
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-card.full-width canvas {
            max-height: 380px;
        }

        /* ========== TABLE ========== */
        .table-wrap {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead th {
            background: var(--surface-2);
            padding: 11px 16px;
            font-family: var(--font-body);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
            color: var(--text-muted);
            font-weight: 600;
            text-align: left;
            border-bottom: 2px solid var(--border);
        }

        thead th:nth-child(n+4) {
            text-align: center;
        }

        tbody td:nth-child(n+4) {
            text-align: center;
        }

        tbody tr {
            border-bottom: 1px solid var(--border);
            transition: background 0.15s;
        }

        tbody tr:last-child {
            border-bottom: none;
        }

        tbody tr:hover {
            background: var(--surface-2);
        }

        tbody td {
            padding: 11px 16px;
            font-size: 14px;
        }

        .rank {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 11px;
        }

        .rank-1 {
            background: var(--amber);
            color: #fff;
        }

        .rank-2 {
            background: var(--text-muted);
            color: #fff;
        }

        .rank-3 {
            background: var(--accent-2);
            color: #fff;
        }

        .rank-other {
            background: var(--surface-2);
            color: var(--text-muted);
        }

        .stock-bar-bg {
            background: var(--surface-2);
            border-radius: 3px;
            height: 8px;
            width: 100px;
            display: inline-block;
            vertical-align: middle;
            margin-left: 8px;
            overflow: hidden;
        }

        .stock-bar {
            display: block;
            height: 100%;
            border-radius: 0 3px 3px 0;
        }

        .highlight-row {
            background: color-mix(in srgb, var(--accent) 6%, transparent) !important;
        }

        .highlight-row td {
            font-weight: 600;
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-green {
            background: color-mix(in srgb, var(--green) 15%, transparent);
            color: var(--green);
        }

        .badge-amber {
            background: color-mix(in srgb, var(--amber) 15%, transparent);
            color: var(--amber);
        }

        .badge-red {
            background: color-mix(in srgb, var(--red) 15%, transparent);
            color: var(--red);
        }

        /* ========== INSIGHTS ========== */
        .insight-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .insight-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 22px;
            box-shadow: var(--shadow);
        }

        .insight-card h4 {
            font-family: var(--font-body);
            font-size: 12px;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }

        .insight-card ul {
            list-style: none;
            padding: 0;
        }

        .insight-card li {
            font-size: 14px;
            padding: 4px 0;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            line-height: 1.5;
        }

        .insight-card li .icon {
            flex-shrink: 0;
            margin-top: 1px;
        }

        .insight-card.strengths {
            border-left: 3px solid var(--green);
        }

        .insight-card.gaps {
            border-left: 3px solid var(--amber);
        }

        /* ========== FOOTER ========== */
        .footer {
            text-align: center;
            padding: 36px 20px;
            color: var(--text-muted);
            font-size: 12px;
            border-top: 1px solid var(--border);
            font-style: italic;
        }

        @media (max-width: 768px) {

            .chart-grid,
            .insight-grid {
                grid-template-columns: 1fr;
            }

            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .container {
                padding: 20px;
            }

            .header {
                padding: 32px 20px;
            }

            .theme-nav {
                position: static;
                margin-top: 16px;
            }

            .qty-toggle {
                position: static;
                margin-top: 8px;
            }
        }
    </style>
</head>

<body>

    <div class="header">
        <h1>Northfield Mandolin Availability Report</h1>
        <div class="header-meta">
            <span>February 22, 2026</span>
            <span>15 US Dealers Surveyed</span>
            <span>66 Instruments Cataloged</span>
        </div>
        <hr class="header-rule" style="display:none">

        <!-- Theme Nav -->
        <div class="theme-nav">
            <button class="theme-nav-btn" id="themePrev" title="Previous theme">
                <svg viewBox="0 0 24 24">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <span class="theme-nav-name" id="themeName">Aged Maple</span>
            <button class="theme-nav-btn" id="themeNext" title="Next theme">
                <svg viewBox="0 0 24 24">
                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                </svg>
            </button>
        </div>
    </div>

    <div class="container">

        <!-- KPI Cards -->
        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-value">66</div>
                <div class="kpi-label">Total in Stock</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">13</div>
                <div class="kpi-label">Active Dealers</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">$4,670</div>
                <div class="kpi-label">Avg. Price</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">20</div>
                <div class="kpi-label">Big Mon Units</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">13</div>
                <div class="kpi-label">F5S Units</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">#3</div>
                <div class="kpi-label">DCM Stock Rank</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-value">7</div>
                <div class="kpi-label">DCM Instruments</div>
            </div>
        </div>

        <!-- Charts Row 1 -->
        <div class="section">
            <div class="section-title">Market Distribution
                <label class="qty-toggle"><input type="checkbox" class="qty-check" checked><span
                        class="qty-toggle-label">Show quantities</span></label>
            </div>
            <div class="chart-grid">
                <div class="chart-card">
                    <h3>By Model Family</h3>
                    <canvas id="modelChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>By Price Tier</h3>
                    <canvas id="priceChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>By Top Wood</h3>
                    <canvas id="woodChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>By Body Style</h3>
                    <canvas id="bodyChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>By Finish / Stain</h3>
                    <canvas id="finishChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>By Nut Width</h3>
                    <canvas id="nutChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Dealer Bar Chart -->
        <div class="section">
            <div class="section-title">Dealer Stock Levels</div>
            <div class="chart-grid">
                <div class="chart-card full-width">
                    <h3>Instruments in Stock by Dealer</h3>
                    <canvas id="dealerChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Geographic -->
        <div class="section">
            <div class="section-title">Geographic &amp; Pricing
                <label class="qty-toggle"><input type="checkbox" class="qty-check" checked><span
                        class="qty-toggle-label">Show quantities</span></label>
            </div>
            <div class="chart-grid">
                <div class="chart-card">
                    <h3>Stock by US Region</h3>
                    <canvas id="regionChart"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Avg. Price by Dealer</h3>
                    <canvas id="avgPriceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Dealer Rankings Table -->
        <div class="section">
            <div class="section-title">Dealer Rankings</div>
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th style="width:44px">Rank</th>
                            <th>Dealer</th>
                            <th>Location</th>
                            <th style="width:170px">Stock</th>
                            <th style="width:90px">Avg. Price</th>
                            <th style="width:80px">Families</th>
                        </tr>
                    </thead>
                    <tbody id="dealerTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Model Detail Table -->
        <div class="section">
            <div class="section-title">Inventory by Model Family</div>
            <div class="table-wrap">
                <table>
                    <thead>
                        <tr>
                            <th>Model Family</th>
                            <th>Count</th>
                            <th>% of Market</th>
                            <th>Price Range</th>
                            <th>Dealers</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Big Mon</strong></td>
                            <td>20</td>
                            <td><span class="badge badge-green">30.3%</span></td>
                            <td>$5,395 – $6,995</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td><strong>F5S / S-Series</strong></td>
                            <td>13</td>
                            <td><span class="badge badge-green">19.7%</span></td>
                            <td>$3,995 – $4,495</td>
                            <td>8</td>
                        </tr>
                        <tr>
                            <td><strong>A5/A4 Special</strong></td>
                            <td>9</td>
                            <td><span class="badge badge-amber">13.6%</span></td>
                            <td>$3,995</td>
                            <td>5</td>
                        </tr>
                        <tr>
                            <td><strong>Octave Mandolins</strong></td>
                            <td>8</td>
                            <td><span class="badge badge-amber">12.1%</span></td>
                            <td>$3,495 – $5,495</td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td><strong>Artist Series</strong></td>
                            <td>6</td>
                            <td><span class="badge badge-amber">9.1%</span></td>
                            <td>$6,995 – $7,495</td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td><strong>F2/F2S Oval Hole</strong></td>
                            <td>6</td>
                            <td><span class="badge badge-amber">9.1%</span></td>
                            <td>$3,795 – $3,995</td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td><strong>Model M</strong></td>
                            <td>2</td>
                            <td><span class="badge badge-red">3.0%</span></td>
                            <td>$2,995 – $3,195</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td><strong>Specialty</strong></td>
                            <td>2</td>
                            <td><span class="badge badge-red">3.0%</span></td>
                            <td>$2,250 – $3,995</td>
                            <td>1</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- DCM Position -->
        <div class="section">
            <div class="section-title">Dry Creek Music — Competitive Position</div>
            <div class="insight-grid">
                <div class="insight-card strengths">
                    <h4>Unique Strengths</h4>
                    <ul>
                        <li><span class="icon">✓</span> Only dealer with a pickup-equipped Big Mon ($5,895 w/ K&K)</li>
                        <li><span class="icon">✓</span> Only dealer with Italian Spruce Big Mon top</li>
                        <li><span class="icon">✓</span> Strongest F2S / Oval Hole selection (3 units)</li>
                        <li><span class="icon">✓</span> Sole active Northfield dealer in the Mountain West</li>
                        <li><span class="icon">✓</span> Tied #3 for total stock count (7 instruments)</li>
                    </ul>
                </div>
                <div class="insight-card gaps">
                    <h4>Potential Opportunities</h4>
                    <ul>
                        <li><span class="icon">→</span> No Artist Series ($7K+ tier, carried by 4 dealers)</li>
                        <li><span class="icon">→</span> No A-style mandolins (A5/A4 at 5 dealers)</li>
                        <li><span class="icon">→</span> No Octave mandolins (carried by 7 dealers)</li>
                        <li><span class="icon">→</span> No entry-level Model M ($2,995–$3,195)</li>
                        <li><span class="icon">→</span> No Adirondack-topped Big Mon (most popular config)</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <div class="footer">
        Northfield Mandolin Market Report · Prepared for Dry Creek Music · February 22, 2026<br>
        Data sourced from direct website inventory checks. Stock status is point-in-time and subject to change.
    </div>

    <script>
        // ========== SVG STAR ICON ==========
        const starSVG = '<span class="dcm-star"><svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14l-5-4.87 6.91-1.01L12 2z"/></svg></span>';

        // ========== THEME SWITCHER ==========
        const themeList = [
            { key: 'default', name: 'Aged Maple' },
            { key: 'sunburst', name: 'Sunburst' },
            { key: 'workshop', name: 'Workshop' },
            { key: 'rosewood', name: 'Dark Rosewood' },
            { key: 'spruce', name: 'Spruce' },
            { key: 'midnight', name: 'Midnight' },
            { key: 'parchment', name: 'Parchment' },
            { key: 'bourbon', name: 'Bourbon' },
            { key: 'vintage-ad', name: 'Vintage Ad' },
            { key: 'bluegrass', name: 'Bluegrass' },
        ];
        let currentThemeIdx = 0;
        let charts = [];

        function applyTheme(idx) {
            currentThemeIdx = ((idx % themeList.length) + themeList.length) % themeList.length;
            const t = themeList[currentThemeIdx];
            if (t.key === 'default') {
                document.documentElement.removeAttribute('data-theme');
            } else {
                document.documentElement.setAttribute('data-theme', t.key);
            }
            document.getElementById('themeName').textContent = t.name;
            updateChartColors();
        }

        document.getElementById('themePrev').addEventListener('click', () => applyTheme(currentThemeIdx - 1));
        document.getElementById('themeNext').addEventListener('click', () => applyTheme(currentThemeIdx + 1));

        // ========== SHOW QUANTITIES TOGGLES ==========
        // Store original labels for each pie chart
        const originalLabels = {};

        // Chart section mapping: 'market' = first toggle, 'geo' = second toggle
        const qtyChecks = document.querySelectorAll('.qty-check');
        const sectionMap = { 0: 'market', 1: 'geo' };

        qtyChecks.forEach((chk, idx) => {
            chk.addEventListener('change', () => {
                const section = sectionMap[idx];
                const show = chk.checked;
                charts.forEach(({ chart, type, chartId, section: chartSection }) => {
                    if (type !== 'pie' || chartSection !== section) return;
                    const orig = originalLabels[chartId];
                    const data = chart.data.datasets[0].data;
                    chart.data.labels = show ? orig.map((lbl, i) => `${lbl} (${data[i]})`) : [...orig];
                    chart.update('none');
                });
            });
        });

        function getThemeColors() {
            const s = getComputedStyle(document.documentElement);
            return {
                chart: [
                    s.getPropertyValue('--chart-1').trim(),
                    s.getPropertyValue('--chart-2').trim(),
                    s.getPropertyValue('--chart-3').trim(),
                    s.getPropertyValue('--chart-4').trim(),
                    s.getPropertyValue('--chart-5').trim(),
                    s.getPropertyValue('--chart-6').trim(),
                    s.getPropertyValue('--chart-7').trim(),
                    s.getPropertyValue('--chart-8').trim(),
                ],
                dcm: s.getPropertyValue('--chart-dcm').trim(),
                accent: s.getPropertyValue('--accent').trim(),
                textMuted: s.getPropertyValue('--text-muted').trim(),
                border: s.getPropertyValue('--border').trim(),
            };
        }

        function updateChartColors() {
            const c = getThemeColors();
            charts.forEach(({ chart, type, dcmIndex }) => {
                chart.data.datasets.forEach(ds => {
                    if (type === 'pie') {
                        ds.backgroundColor = c.chart.slice(0, ds.data.length);
                    } else if (type === 'bar') {
                        ds.backgroundColor = ds.data.map((_, i) => i === dcmIndex ? c.dcm : c.accent);
                    }
                });
                chart.options.scales && Object.values(chart.options.scales).forEach(axis => {
                    if (axis.ticks) axis.ticks.color = c.textMuted;
                    if (axis.grid) axis.grid.color = c.border + '60';
                });
                if (chart.options.plugins?.legend?.labels) {
                    chart.options.plugins.legend.labels.color = c.textMuted;
                }
                chart.update('none');
            });
        }

        // ========== CHART DEFAULTS ==========
        const tc = getThemeColors();
        Chart.defaults.color = tc.textMuted;
        Chart.defaults.borderColor = tc.border + '60';
        Chart.defaults.font.family = "'Source Sans 3', sans-serif";

        const pieOpts = {
            responsive: true,
            cutout: '50%',
            plugins: {
                legend: {
                    position: 'right',
                    labels: {
                        padding: 10,
                        usePointStyle: true,
                        pointStyle: 'circle',
                        font: { size: 11 },
                        color: tc.textMuted
                    }
                }
            }
        };

        // 1. Model Family
        const modelLabels = ['Big Mon', 'F5S/S-Series', 'A5/A4 Special', 'Octave', 'Artist Series', 'F2/Oval Hole', 'Model M', 'Specialty'];
        const modelData = [20, 13, 9, 8, 6, 6, 2, 2];
        originalLabels['model'] = modelLabels;
        const modelChart = new Chart(document.getElementById('modelChart'), {
            type: 'doughnut',
            data: {
                labels: modelLabels.map((l, i) => `${l} (${modelData[i]})`),
                datasets: [{ data: modelData, backgroundColor: tc.chart, borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: modelChart, type: 'pie', chartId: 'model', section: 'market' });

        // 2. Price Tier
        const priceLabelsOrig = ['Under $3,500', '$3,500–$4,500', '$4,500–$5,500', '$5,500–$6,000', '$6,000+'];
        const priceData = [5, 33, 8, 14, 6];
        originalLabels['price'] = priceLabelsOrig;
        const priceChart = new Chart(document.getElementById('priceChart'), {
            type: 'doughnut',
            data: {
                labels: priceLabelsOrig.map((l, i) => `${l} (${priceData[i]})`),
                datasets: [{ data: priceData, backgroundColor: tc.chart.slice(0, 5), borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: priceChart, type: 'pie', chartId: 'price', section: 'market' });

        // 3. Top Wood
        const woodLabels = ['Engelmann', 'Adirondack / Red Spruce', 'Italian Alpine', 'Unspecified'];
        const woodData = [24, 22, 10, 10];
        originalLabels['wood'] = woodLabels;
        const woodChart = new Chart(document.getElementById('woodChart'), {
            type: 'doughnut',
            data: {
                labels: woodLabels.map((l, i) => `${l} (${woodData[i]})`),
                datasets: [{ data: woodData, backgroundColor: tc.chart.slice(0, 4), borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: woodChart, type: 'pie', chartId: 'wood', section: 'market' });

        // 4. Body Style
        const bodyLabels = ['F-style (F-holes)', 'A-style', 'Octave/Mandola/Other', 'F-style (Oval)'];
        const bodyData = [39, 11, 10, 6];
        originalLabels['body'] = bodyLabels;
        const bodyChart = new Chart(document.getElementById('bodyChart'), {
            type: 'doughnut',
            data: {
                labels: bodyLabels.map((l, i) => `${l} (${bodyData[i]})`),
                datasets: [{ data: bodyData, backgroundColor: tc.chart.slice(0, 4), borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: bodyChart, type: 'pie', chartId: 'body', section: 'market' });

        // 4b. Finish / Stain
        const finishLabels = ['Sunburst / Standard', 'Icelandic Brown', 'Cherry / Cherryburst', 'Black Top', 'Amber', 'Dark Leatherburst'];
        const finishData = [46, 5, 5, 4, 4, 2];
        originalLabels['finish'] = finishLabels;
        const finishChart = new Chart(document.getElementById('finishChart'), {
            type: 'doughnut',
            data: {
                labels: finishLabels.map((l, i) => `${l} (${finishData[i]})`),
                datasets: [{ data: finishData, backgroundColor: tc.chart.slice(0, 6), borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: finishChart, type: 'pie', chartId: 'finish', section: 'market' });

        // 4c. Nut Width
        const nutLabels = ['Standard', 'Wide Nut'];
        const nutData = [54, 12];
        originalLabels['nut'] = nutLabels;
        const nutChart = new Chart(document.getElementById('nutChart'), {
            type: 'doughnut',
            data: {
                labels: nutLabels.map((l, i) => `${l} (${nutData[i]})`),
                datasets: [{ data: nutData, backgroundColor: [tc.chart[0], tc.chart[2]], borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: nutChart, type: 'pie', chartId: 'nut', section: 'market' });

        // 5. Dealer Stock (horizontal bar — left edge sharp, right edge rounded)
        const dealerNames = [
            'Acoustic Music Works', 'Penny Lane', 'Dry Creek Music', 'Elderly Instruments',
            'Morgan Music', 'Banjo Ben', 'Dusty Strings', 'Retrofret',
            'Gryphon Strings', 'Carter Vintage', "Fiddler's Green", 'Old Town School',
            'Music Emporium', 'Lowe Vintage', 'Music Villa'
        ];
        const dealerStock = [12, 9, 7, 7, 6, 6, 5, 4, 3, 2, 2, 2, 1, 0, 0];
        const dcmIdx = 2;

        const dealerChart = new Chart(document.getElementById('dealerChart'), {
            type: 'bar',
            data: {
                labels: dealerNames,
                datasets: [{
                    label: 'In Stock',
                    data: dealerStock,
                    backgroundColor: dealerStock.map((_, i) => i === dcmIdx ? tc.dcm : tc.accent),
                    borderRadius: { topLeft: 0, bottomLeft: 0, topRight: 3, bottomRight: 3 },
                    borderSkipped: 'start',
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        grid: { color: tc.border + '40' },
                        ticks: { stepSize: 2, color: tc.textMuted },
                        beginAtZero: true
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: tc.textMuted, font: { size: 12 } }
                    }
                },
                plugins: { legend: { display: false } },
                layout: { padding: { top: 4, bottom: 4 } }
            }
        });
        charts.push({ chart: dealerChart, type: 'bar', dcmIndex: dcmIdx });

        // 6. Region
        const regionLabels = ['Midwest', 'Northeast', 'Mountain West', 'Pacific West', 'Southeast'];
        const regionData = [21, 17, 7, 8, 4];
        originalLabels['region'] = regionLabels;
        const regionChart = new Chart(document.getElementById('regionChart'), {
            type: 'doughnut',
            data: {
                labels: regionLabels.map((l, i) => `${l} (${regionData[i]})`),
                datasets: [{ data: regionData, backgroundColor: tc.chart.slice(0, 5), borderWidth: 0, hoverOffset: 6 }]
            },
            options: pieOpts
        });
        charts.push({ chart: regionChart, type: 'pie', chartId: 'region', section: 'geo' });

        // 7. Avg Price bar
        const priceBarLabels = ['Music Emp.', 'Gryphon', 'Penny Lane', 'Banjo Ben', 'Morgan', 'Dry Creek', 'Fiddler\'s Grn', 'Elderly', 'Acoustic MW', 'Dusty Strings'];
        const avgPrices = [7495, 6228, 5529, 5345, 4879, 4752, 4845, 4581, 4371, 4135];
        const dcmPriceIdx = 5;

        const avgPriceChart = new Chart(document.getElementById('avgPriceChart'), {
            type: 'bar',
            data: {
                labels: priceBarLabels,
                datasets: [{
                    label: 'Avg. Price',
                    data: avgPrices,
                    backgroundColor: avgPrices.map((_, i) => i === dcmPriceIdx ? tc.dcm : tc.accent),
                    borderRadius: { topLeft: 0, bottomLeft: 0, topRight: 3, bottomRight: 3 },
                    borderSkipped: 'start',
                }]
            },
            options: {
                responsive: true,
                indexAxis: 'y',
                scales: {
                    x: {
                        grid: { color: tc.border + '40' },
                        ticks: { callback: v => '$' + v.toLocaleString(), color: tc.textMuted },
                        min: 3500, max: 8000
                    },
                    y: {
                        grid: { display: false },
                        ticks: { color: tc.textMuted, font: { size: 11 } }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: ctx => '$' + ctx.parsed.x.toLocaleString() } }
                }
            }
        });
        charts.push({ chart: avgPriceChart, type: 'bar', dcmIndex: dcmPriceIdx });

        // ========== DEALER TABLE ==========
        const dealers = [
            { rank: 1, name: 'Acoustic Music Works', loc: 'Pittsburgh, PA', stock: 12, avg: '$4,371', families: 6, dcm: false },
            { rank: 2, name: 'Penny Lane Music Emporium', loc: 'Fort Lauderdale, FL', stock: 9, avg: '$5,529', families: 5, dcm: false },
            { rank: 3, name: 'Dry Creek Music', loc: 'Florence, CO', stock: 7, avg: '$4,752', families: 3, dcm: true },
            { rank: 3, name: 'Elderly Instruments', loc: 'Lansing, MI', stock: 7, avg: '$4,581', families: 4, dcm: false },
            { rank: 5, name: 'Morgan Music', loc: 'Lebanon, MO', stock: 6, avg: '$4,879', families: 5, dcm: false },
            { rank: 5, name: 'Banjo Ben General Store', loc: 'Exeter, MO', stock: 6, avg: '$5,345', families: 2, dcm: false },
            { rank: 7, name: 'Dusty Strings', loc: 'Seattle, WA', stock: 5, avg: '$4,135', families: 4, dcm: false },
            { rank: 8, name: 'Retrofret', loc: 'Brooklyn, NY', stock: 4, avg: '$3,909', families: 4, dcm: false },
            { rank: 9, name: 'Gryphon Strings', loc: 'Palo Alto, CA', stock: 3, avg: '$6,228', families: 3, dcm: false },
            { rank: 10, name: 'Carter Vintage', loc: 'Nashville, TN', stock: 2, avg: '$3,745', families: 2, dcm: false },
            { rank: 10, name: "Fiddler's Green", loc: 'Lockhart, TX', stock: 2, avg: '$4,845', families: 2, dcm: false },
            { rank: 10, name: 'Old Town School', loc: 'Chicago, IL', stock: 2, avg: '$4,095', families: 2, dcm: false },
            { rank: 13, name: 'The Music Emporium', loc: 'Lexington, MA', stock: 1, avg: '$7,495', families: 1, dcm: false },
            { rank: 14, name: 'Lowe Vintage', loc: 'Burlington, NC', stock: 0, avg: '—', families: 0, dcm: false },
            { rank: 14, name: 'Music Villa', loc: 'Bozeman, MT', stock: 0, avg: '—', families: 0, dcm: false },
        ];

        const tbody = document.getElementById('dealerTableBody');
        let rowsHTML = '';
        dealers.forEach(d => {
            const rc = d.rank === 1 ? 'rank-1' : d.rank === 2 ? 'rank-2' : d.rank === 3 ? 'rank-3' : 'rank-other';
            const bw = (d.stock / 12 * 100).toFixed(0);
            const cls = d.dcm ? 'highlight-row' : '';
            const star = d.dcm ? starSVG : '';
            const barColor = d.dcm ? 'background:var(--chart-dcm)' : 'background:var(--accent)';
            rowsHTML += `<tr class="${cls}">
            <td><span class="rank ${rc}">${d.rank}</span></td>
            <td>${d.name}${star}</td>
            <td>${d.loc}</td>
            <td>${d.stock} <span class="stock-bar-bg"><span class="stock-bar" style="width:${bw}%;${barColor}"></span></span></td>
            <td>${d.avg}</td>
            <td>${d.families}</td>
        </tr>`;
        });
        tbody.innerHTML = rowsHTML;
    </script>

</body>

</html>